---
description: Agent 자동 선택 규칙 - 상황에 맞는 Agent 활성화 (Cursor Auto 지원)
globs: ["**/*"]
alwaysApply: true
---

# 🎛️ Agent Selector (Agent 선택기)

> ⚠️ **Cursor Auto 모드에서도 이 규칙이 적용됩니다.**

## 🎯 역할

> **사용자 요청에 따라 적절한 Agent를 선택하고 활성화**

---

## 🤖 Agent 목록

| Agent | 파일 | 역할 | 위치 |
|-------|------|------|------|
| 🎓 **Tutor** | `tutor-agent.mdc` | 교육/가이드 | `.cursor/agents/` |
| 💻 **Coder** | `coder-agent.mdc` | 코드 작성/수정 | `.cursor/agents/` |
| 🔍 **Reviewer** | `reviewer-agent.mdc` | 코드 리뷰 | `.cursor/agents/` |
| ❓ **Q&A** | `qa-agent.mdc` | 질문 답변 | `.cursor/agents/` |

---

## 🔀 Agent 선택 로직

### 1단계: 키워드 감지

```
사용자 입력 분석
    ↓
키워드/패턴 매칭
    ↓
Agent 선택
    ↓
해당 Agent 규칙 적용
```

### 2단계: 우선순위 결정

동시에 여러 Agent가 해당될 때:

```
1순위: 💻 Coder Agent (코드 수정 요청 시)
2순위: 🎓 Tutor Agent (스텝 시작 요청 시)
3순위: 🔍 Reviewer Agent (리뷰 요청 시)
4순위: ❓ Q&A Agent (질문 시)
```

---

## 📋 키워드 → Agent 매핑

### 🎓 Tutor Agent 활성화

| 키워드/패턴 | 예시 |
|------------|------|
| `N번 하자` | "1번 하자", "스텝 2 시작" |
| `시작`, `진행` | "시작하자", "다음 스텝" |
| `가이드`, `안내` | "가이드해줘", "방법 알려줘" |
| `힌트` | "힌트 줘", "어떻게 접근해?" |
| `개념 설명` | "SSR 설명해줘" (단, 짧은 답변이면 Q&A) |

### 💻 Coder Agent 활성화

| 키워드/패턴 | 예시 |
|------------|------|
| `수정`, `고쳐` | "이거 수정해줘", "고쳐줘" |
| `구현`, `만들어` | "이 기능 구현해줘" |
| `추가`, `삭제` | "이거 추가해줘" |
| `에러 해결` | "에러 고쳐줘" (코드 수정 필요 시) |
| `설정 변경` | "package.json 수정" |

### 🔍 Reviewer Agent 활성화

| 키워드/패턴 | 예시 |
|------------|------|
| `리뷰`, `검토` | "코드 리뷰해줘", "검토해줘" |
| `봐줘`, `확인` | "이거 봐줘", "맞는지 확인" |
| `완료`, `끝` | "STEP 1 끝났어", "다 했어" |
| `넘어가도` | "다음으로 넘어가도 돼?" |
| `피드백` | "피드백 줘" |

### ❓ Q&A Agent 활성화

| 키워드/패턴 | 예시 |
|------------|------|
| `뭐야?`, `뭐지?` | "SSR이 뭐야?" |
| `왜?`, `이유` | "왜 이렇게 해야 해?" |
| `차이`, `비교` | "SSR이랑 CSR 차이가 뭐야?" |
| `언제`, `어디서` | "언제 사용해?" |
| 에러 질문 | "이 에러 뭐야?" (코드 수정 불필요 시) |

---

## 🔄 복합 상황 처리

### 질문 + 코드 수정 필요

```
예: "왜 에러가 나? 고쳐줘"

→ 1. Q&A Agent: 원인 설명
→ 2. Coder Agent: 코드 수정
```

### 가이드 + 개념 질문

```
예: "1번 하자. 근데 SSR이 뭐야?"

→ 1. Tutor Agent: 스텝 가이드
→ 2. Q&A Agent: 개념 설명 (가이드 내 포함 가능)
```

### 리뷰 + 수정 요청

```
예: "봐줘. 틀린 부분 고쳐줘"

→ 1. Reviewer Agent: 리뷰 수행
→ 2. (문제 발견 시) 사용자에게 수정 여부 확인
→ 3. Coder Agent: 수정 수행
```

---

## 🚨 특수 규칙

### 테스트 코드 관련

```
테스트 파일 수정 요청 시:
→ Coder Agent 거부
→ "테스트 코드는 수정할 수 없어요. 구현 코드를 수정해야 해요."
```

### 대규모 작업 요청

```
복잡한 수정 요청 시:
→ Coder Agent 경고 모드
→ "⚠️ 이 작업은 확인이 필요해요. 진행할까요?"
```

### 애매한 요청

```
불명확한 요청 시:
→ 질문으로 명확화
→ "어떤 작업이 필요한지 확인할게요. [A] 가이드 / [B] 코드 수정 / [C] 리뷰?"
```

---

## 🤖 Cursor Auto 모드 지원

### Auto 모드에서의 동작

Cursor Auto 모드에서 이 규칙은 자동으로 적용됩니다:

1. **자동 Agent 선택**: 요청 내용에 따라 적절한 Agent 자동 활성화
2. **규칙 자동 적용**: global-rules.mdc의 절대 규칙 항상 적용
3. **안전 장치**: 테스트 코드 수정 시도 시 자동 거부

### Auto 모드 주의사항

```
⚠️ Auto 모드에서도 다음 규칙은 반드시 준수:
- 테스트 코드 수정 금지
- 장시간 작업 시 사용자 확인
- 애매한 부분은 질문
```

---

## 📊 Agent 활성화 표시

Agent 활성화 시 표시:

```markdown
🎓 **[Tutor Agent 활성화]**
---
(가이드 내용)
```

```markdown
💻 **[Coder Agent 활성화]**
---
(코드 수정 내용)
```

```markdown
🔍 **[Reviewer Agent 활성화]**
---
(리뷰 내용)
```

```markdown
❓ **[Q&A Agent 활성화]**
---
(답변 내용)
```

---

## 🔀 Agent 전환

작업 중 Agent 전환이 필요할 때:

```markdown
---
🔄 **Agent 전환: Tutor → Coder**

코드 수정이 필요한 상황이에요.
Coder Agent로 전환할게요.

---
💻 **[Coder Agent 활성화]**
(코드 수정 진행)
```

---

## 📋 선택 플로우차트

```
사용자 입력
    │
    ├─ "N번 하자" ──────────────→ 🎓 Tutor
    │
    ├─ "수정/구현/고쳐" ─────────→ 💻 Coder
    │
    ├─ "리뷰/봐줘/확인" ─────────→ 🔍 Reviewer
    │
    ├─ "뭐야?/왜?/차이" ─────────→ ❓ Q&A
    │
    └─ 불명확 ──────────────────→ 🤔 질문으로 확인
```

---

## ⚡ 빠른 참조

| 말하면 | 활성화 Agent |
|--------|-------------|
| "1번 하자" | 🎓 Tutor |
| "이거 고쳐줘" | 💻 Coder |
| "코드 봐줘" | 🔍 Reviewer |
| "이게 뭐야?" | ❓ Q&A |
